{"ast":null,"code":"import _classCallCheck from\"C:/Users/puchkov/Documents/GitHub/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/puchkov/Documents/GitHub/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Authorization=/*#__PURE__*/function(){function Authorization(_ref){var baseUrl=_ref.baseUrl;_classCallCheck(this,Authorization);this._url=baseUrl;}// Проверка\n_createClass(Authorization,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u0423 \\u043D\\u0430\\u0441 \\u043E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(res.status));}// Регистрация\n},{key:\"register\",value:function register(data){return fetch(this._url+\"/signup\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:data.email,password:data.password})}).then(this._checkResponse);}// Авторизация\n},{key:\"login\",value:function login(data){return fetch(this._url+\"/signin\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:data.email,password:data.password})}).then(this._checkResponse);}// Проверка токена\n},{key:\"checkToken\",value:function checkToken(token){return fetch(this._url+\"/users/me\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(this._checkResponse);}}]);return Authorization;}();var auth=new Authorization({baseUrl:\"https://api.rerasmesto.students.nomoredomains.monster\"});export default auth;","map":{"version":3,"names":["Authorization","baseUrl","_url","res","ok","json","Promise","reject","status","data","fetch","method","headers","body","JSON","stringify","email","password","then","_checkResponse","token","auth"],"sources":["C:/Users/puchkov/documents/github/react-mesto-api-full-gha/frontend/src/utils/Authorization.js"],"sourcesContent":["class Authorization {\r\n  constructor({ baseUrl }) {\r\n    this._url = baseUrl;\r\n  }\r\n\r\n  // Проверка\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`У нас ошибка ${res.status}`);\r\n  }\r\n\r\n  // Регистрация\r\n  register(data) {\r\n    return fetch(this._url + \"/signup\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email: data.email, password: data.password }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  // Авторизация\r\n  login(data) {\r\n    return fetch(this._url + \"/signin\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email: data.email, password: data.password }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  // Проверка токена\r\n  checkToken(token) {\r\n    return fetch(this._url + \"/users/me\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst auth = new Authorization({\r\n  baseUrl: \"https://api.rerasmesto.students.nomoredomains.monster\",\r\n});\r\n\r\nexport default auth;\r\n"],"mappings":"mTAAMA,cAAa,yBACjB,4BAAyB,IAAXC,QAAO,MAAPA,OAAO,qCACnB,IAAI,CAACC,IAAI,CAAGD,OAAO,CACrB,CAEA;AAAA,wDACA,wBAAeE,GAAG,CAAE,CAClB,GAAIA,GAAG,CAACC,EAAE,CAAE,CACV,MAAOD,IAAG,CAACE,IAAI,EAAE,CACnB,CACA,MAAOC,QAAO,CAACC,MAAM,0EAAiBJ,GAAG,CAACK,MAAM,EAAG,CACrD,CAEA;AAAA,wBACA,kBAASC,IAAI,CAAE,CACb,MAAOC,MAAK,CAAC,IAAI,CAACR,IAAI,CAAG,SAAS,CAAE,CAClCS,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAEP,IAAI,CAACO,KAAK,CAAEC,QAAQ,CAAER,IAAI,CAACQ,QAAS,CAAC,CACrE,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CAC9B,CAEA;AAAA,qBACA,eAAMV,IAAI,CAAE,CACV,MAAOC,MAAK,CAAC,IAAI,CAACR,IAAI,CAAG,SAAS,CAAE,CAClCS,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAEP,IAAI,CAACO,KAAK,CAAEC,QAAQ,CAAER,IAAI,CAACQ,QAAS,CAAC,CACrE,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CAC9B,CAEA;AAAA,0BACA,oBAAWC,KAAK,CAAE,CAChB,MAAOV,MAAK,CAAC,IAAI,CAACR,IAAI,CAAG,WAAW,CAAE,CACpCS,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCZ,aAAa,kBAAYoB,KAAK,CAChC,CACF,CAAC,CAAC,CAACF,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CAC9B,CAAC,6BAGH,GAAME,KAAI,CAAG,GAAIrB,cAAa,CAAC,CAC7BC,OAAO,CAAE,uDACX,CAAC,CAAC,CAEF,cAAeoB,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}